---
title: "Bachelorarbeit"
author: "Laura Kiemes, 12250912"
date: "`r Sys.Date()`"
output: html_document
---

# Setup

```{r setup}
knitr::opts_chunk$set(echo = TRUE)

if (!require("pacman")) install.packages("pacman"); library(pacman)
pacman::p_load(haven, readr, tidyverse)

here::i_am("project.Rmd")
```


# Data Cleaning

```{r cleaning ZA4500_patch_v2-0-0.do}
allbus2006 <- read_dta(here::here("data", "ZA4500_v2-0-0.dta")) # gesis data

allbus2006 <- allbus2006 |> 
  mutate(
    v736 = ifelse(v736 %in% c(8:10), NA, v736), # as line 25-30 in data/ZA4500_patch_v2-0-0.do
    v738 = ifelse(v738 %in% c(8:10), NA, v738), # as line 25-30 in data/ZA4500_patch_v2-0-0.do
    interviewer_male = case_when(v702 == 2 ~ 0, 
                                 TRUE ~ v702),
    interviewer_age = v703,
    interviewer_agediff = case_when(v703 == 999 ~ NA, 
                                    TRUE ~ abs(v703 - v27)),
    interviewer_edu = factor(v705, 
                             levels = c(1:4), 
                             labels = c("Volks-/Hauptschulabschluss",
                                        "Mittlere Reife",
                                        "(Fach-)Hochschulreife",
                                        "(Fach-)Hochschulabschluss"),
                             ordered = TRUE),
    interviewer_experience = v706
    ) 
```

```{r save csv}
write_csv(allbus2006, here::here("data", "allbus2006.csv")) # save as csv
```

